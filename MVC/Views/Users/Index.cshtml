@using MVC.Models.UserModels
@model MVC.Filters.UserFilters
@{
	Layout = "_AdminLayout";
	ViewData["Title"] = "Users";
}

@if (ViewBag.Message != null)
{
	<div class="alert alert-danger alert-bdleft-danger w-25 mx-auto">
		<button type="button" class="btn-close float-end fs-10" data-bs-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">×</span>
		</button>
		<strong>@ViewBag.Message</strong>
	</div>
}

<!-- Main Content-->
<div class="main-content side-content pt-0">
	<div class="main-container container-fluid">
		<div class="inner-body">
			<!-- Page Header -->
			<div class="page-header">
				<div>
					<h2 class="main-content-title tx-24 mg-b-5">Пользователей</h2>
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a asp-action="Index" asp-controller="Admin">Dashboard</a></li>
						<li class="breadcrumb-item active" aria-current="page">Users</li>
					</ol>
				</div>
				<div class="d-flex">
					<div class="justify-content-center">
						<button type="button" class="btn btn-white btn-icon-text my-2 me-2">
							<i class="fe fe-settings"></i>
							<span>Settings</span>
						</button>
						<button type="button" class="btn btn-primary my-2 btn-icon-text">
							<i class="fe fe-download-cloud bg-white-transparent text-white"></i>
							<span>Reports</span>
						</button>
					</div>
				</div>
			</div>


			<div class="row row-sm" data-select2-id="57">
				<div class="col-lg-12" data-select2-id="56">
					<div class="card custom-card overflow-hidden" data-select2-id="55">
						<div class="card-header border-bottom">
							<a asp-action="CreateUser" class="step-btn btn btn-success mb-1">Добавить пользователя</a>
						</div>
						<div class="card-body" data-select2-id="54">
							<div>
								<h6 class="main-content-label mb-1">Basic DataTable</h6>
								<p class="text-muted card-sub-title">Searching, ordering and paging goodness will be immediately added to the table, as shown in this example.</p>
							</div>
							<div class="table-responsive" data-select2-id="53">
								<div id="basic-datatable_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer" data-select2-id="basic-datatable_wrapper">
									<div class="row" data-select2-id="52">
										<form class="row">
											<div class="col-sm-6 col-md-2" data-select2-id="51">
												<label>Кол-во
													<select asp-for="PageSize" name="basic-datatable_length" aria-controls="basic-datatable" class="form-select" style="width:70px" data-select2-id="1" tabindex="-1" aria-hidden="true">
														<option value="10">10</option>
														<option value="20">20</option>
														<option value="50">50</option>
														<option value="100">100</option>
													</select>
												</label>
											</div>
											<div class="col-sm-6 col-md-5">
												<div id="basic-datatable_filter" class="dataTables_filter">
													<label>ИНН
														<input asp-for="Inn" type="search" class="form-control form-control" placeholder="Search..." aria-controls="basic-datatable">
													</label>
												</div>
											</div>
											<div class="col-sm-6 col-md-5">
												<div id="basic-datatable_filter" class="dataTables_filter">
													<label>Имя,Фимилия,Отчество
														<input asp-for="Name" type="search" class="form-control form-control" placeholder="Search..." aria-controls="basic-datatable">
													</label>
												</div>
											</div>
										</form>
										
									</div>
									<div class="row">
										<div class="col-sm-12">
											<table class="table table-bordered text-nowrap border-bottom dataTable no-footer" id="basic-datatable" role="grid" aria-describedby="basic-datatable_info">
												@if (ViewData["Users"] != null)
												{
													<thead>
														<tr role="row">
															<th class="wd-10p" tabindex="0" aria-controls="basic-datatable" style="width: 100px;">User Id</th>
															<th class="wd-25p" tabindex="0" aria-controls="basic-datatable" style="width: 259px;">User Name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Ips</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Inn</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">First Name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Last Name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Middle Name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Full Name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Phone number</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Addres text</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Addres email</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Addres website</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Profession</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Created User</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Organ name</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Created At</th>
															<th class="wd-15p" tabindex="0" aria-controls="basic-datatable" style="width: 139px;">Updated At</th>
															<th class="wd-20p" tabindex="0" aria-controls="basic-datatable" style="width: 199px;">Action</th>
														</tr>
													</thead>
													<tbody>
														@foreach (GetUsersDto user in (List<GetUsersDto>)ViewData["Users"]!)
														{
															<tr class="odd">
																<td>@user.UserId</td>
																<td>@user.UserName</td>
																<td>@user.Ips</td>
																<td>@user.Inn</td>
																<td>@user.FirstName</td>
																<td>@user.LastName</td>
																<td>@user.MiddleName</td>
																<td>@user.FullName</td>
																<td>@user.PhoneNumber</td>
																<td>@user.AdrText</td>
																<td>@user.AdrEmail</td>
																<td>@user.AdrWebSite</td>
																<td>@user.ProfessionName</td>
																<td>@user.CreatedUser</td>
																<td>@user.OrganName</td>
																<td>@user.CreatedAt</td>
																<td>@user.UpdatedAt</td>
																<td class="text-center">
																	<a asp-action="DeleteUser" asp-route-userId="@user.UserId" class="remove-list tx-16 remove-button" data-abc="true">
																		<i class="fe fe-trash text-danger me-2"></i>
																	</a>
																	<a asp-action="UpdateUser" asp-route-userId="@user.UserId" class="remove-list tx-16 remove-button" data-abc="true">
																		<i class="fe fe-edit text-info"></i>
																	</a>
																</td>
															</tr>
														}
													</tbody>
												}
											</table>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12 col-md-5">
											@{
												var coldo = Model.PageSize * Model.PageNumber;
												var colot = (Model.PageNumber - 1) * Model.PageSize + 1; 
											}
											<div class="dataTables_info" id="basic-datatable_info" role="status" aria-live="polite">Показаны от @colot до @coldo из @Model.TotalRecords пользователей</div>
										</div>
										<div class="col-sm-12 col-md-7">
											<div class="dataTables_paginate paging_simple_numbers" id="basic-datatable_paginate">
												<ul class="pagination">
													<li class="paginate_button page-item previous disabled" id="basic-datatable_previous"><a href="#" aria-controls="basic-datatable" data-dt-idx="0" tabindex="0" class="page-link">Previous</a></li>
													<li class="paginate_button page-item active"><a href="#" aria-controls="basic-datatable" data-dt-idx="1" tabindex="0" class="page-link">1</a></li>
													<li class="paginate_button page-item "><a href="#" aria-controls="basic-datatable" data-dt-idx="2" tabindex="0" class="page-link">2</a></li>
													<li class="paginate_button page-item "><a href="#" aria-controls="basic-datatable" data-dt-idx="3" tabindex="0" class="page-link">3</a></li>
													<li class="paginate_button page-item "><a href="#" aria-controls="basic-datatable" data-dt-idx="4" tabindex="0" class="page-link">4</a></li>
													<li class="paginate_button page-item "><a href="#" aria-controls="basic-datatable" data-dt-idx="5" tabindex="0" class="page-link">5</a></li>
													<li class="paginate_button page-item "><a href="#" aria-controls="basic-datatable" data-dt-idx="6" tabindex="0" class="page-link">6</a></li>
													<li class="paginate_button page-item next" id="basic-datatable_next"><a href="#" aria-controls="basic-datatable" data-dt-idx="7" tabindex="0" class="page-link">Next</a></li>
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- End Main Content-->